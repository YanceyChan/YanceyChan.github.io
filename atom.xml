<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[YS 的Blog]]></title>
  <link href="http://yanceychan.github.io/atom.xml" rel="self"/>
  <link href="http://yanceychan.github.io/"/>
  <updated>2015-09-24T16:23:28+08:00</updated>
  <id>http://yanceychan.github.io/</id>
  <author>
    <name><![CDATA[Yancey]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Undefined Symbols for Architecture I386]]></title>
    <link href="http://yanceychan.github.io/blog/2015/09/24/undefined-symbols-for-architecture-i386/"/>
    <updated>2015-09-24T16:09:09+08:00</updated>
    <id>http://yanceychan.github.io/blog/2015/09/24/undefined-symbols-for-architecture-i386</id>
    <content type="html"><![CDATA[<p><img src="https://github.com/YanceyChan/YanceyChan.github.io/source/images/20150702134813838.png" alt="image" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Expression Is Not Assignable]]></title>
    <link href="http://yanceychan.github.io/blog/2015/09/24/expression-is-not-assignable/"/>
    <updated>2015-09-24T15:51:38+08:00</updated>
    <id>http://yanceychan.github.io/blog/2015/09/24/expression-is-not-assignable</id>
    <content type="html"><![CDATA[<p>问题是：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>self.view.frame.size.height = 100f;</span></code></pre></td></tr></table></div></figure>


<p>这样写没法通过编译，编译器会报错</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"expression is not assignable"</span></code></pre></td></tr></table></div></figure>


<p>原因是，这句话里面的几个点有两种不同的含义。self.view.frame是Objective-C语法，是读取view属性的frame属性，在Objective-C中使用点来访问属性只是一种语法糖，所以self.view.frame这句话会被转换成：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[[self view] frame]</span></code></pre></td></tr></table></div></figure>


<p>也就是说，实际上这是消息传递。</p>

<p>而frame属性是一个CGRect结构，所以frame.size.height是C语言的语法，就是访问CGRect结构中的size字段，同样，height是CGSize结构的一个字段。所以，你这句话实际上等于：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[[self view] frame].size.height = 100f;</span></code></pre></td></tr></table></div></figure>


<p>而Objective-C只是对C语言的一个扩展，所以，上面这句话会被转成C语言的函数调用形式，类似于这种形式：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getframe().size.height = 100f;</span></code></pre></td></tr></table></div></figure>


<p>而在C语言里，函数的返回值是一个R-Value，是不能直接给它赋值的（所谓的R-Value，就是只能出现在等号的右边，你可以理解成是一个常量；而可以被赋值的是L-Value，可以出现在等号的左边，通常是变量）。因此，当你打算直接给函数的返回值赋值的时候，编译器告诉你"这个表达式无法被赋值"。这就是这个错误的出现原因。</p>

<p>所以，解决办法就是，用一个临时变量保存这个函数的返回值，修改这个临时变量，然后再赋给frame：</p>

<p>// 1. 用一个临时变量保存返回值。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CGRect temp = self.view.frame;</span></code></pre></td></tr></table></div></figure>


<p>// 2. 给这个变量赋值。因为变量都是L-Value，可以被赋值</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>temp.size.height = 100f;</span></code></pre></td></tr></table></div></figure>


<p>// 3. 修改frame的值</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>self.view.frame = temp;</span></code></pre></td></tr></table></div></figure>


<p>我知道这样写看起来有点笨，也许有一天，Objective-C的编译器会变的智能一点，自动完成这种转换。</p>

<p>参考：<a href="http://segmentfault.com/q/1010000000177216">http://segmentfault.com/q/1010000000177216</a></p>
]]></content>
  </entry>
  
</feed>
